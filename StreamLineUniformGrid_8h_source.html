<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Viskores: StreamLineUniformGrid.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Viskores
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_630b2eeaf9387bc8ab0321edd2e7ec56.html">viskores</a></li><li class="navelem"><a class="el" href="dir_3d31c2e5c66f2205c96802ed8da9779e.html">worklet</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">StreamLineUniformGrid.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="StreamLineUniformGrid_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//============================================================================</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//  The contents of this file are covered by the Viskores license. See</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//  LICENSE.txt for details.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//  By contributing to this file, all contributors agree to the Developer</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//  Certificate of Origin Version 1.1 (DCO 1.1) as stated in DCO.txt.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//============================================================================</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//============================================================================</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//  Copyright (c) Kitware, Inc.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//  All rights reserved.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//  See LICENSE.txt for details.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//  This software is distributed WITHOUT ANY WARRANTY; without even</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//  the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//  PURPOSE.  See the above copyright notice for more information.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//============================================================================</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#ifndef viskores_worklet_StreamLineUniformGrid_h</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#define viskores_worklet_StreamLineUniformGrid_h</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Algorithm_8h.html">viskores/cont/Algorithm.h</a>&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="ArrayHandle_8h.html">viskores/cont/ArrayHandle.h</a>&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="ArrayHandleCounting_8h.html">viskores/cont/ArrayHandleCounting.h</a>&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="CellSetExplicit_8h.html">viskores/cont/CellSetExplicit.h</a>&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="CellSetStructured_8h.html">viskores/cont/CellSetStructured.h</a>&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="ConvertNumComponentsToOffsets_8h.html">viskores/cont/ConvertNumComponentsToOffsets.h</a>&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="DataSet_8h.html">viskores/cont/DataSet.h</a>&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="DeviceAdapter_8h.html">viskores/cont/DeviceAdapter.h</a>&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Field_8h.html">viskores/cont/Field.h</a>&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Invoker_8h.html">viskores/cont/Invoker.h</a>&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="ScatterUniform_8h.html">viskores/worklet/ScatterUniform.h</a>&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="WorkletMapField_8h.html">viskores/worklet/WorkletMapField.h</a>&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceviskores.html">viskores</a></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">namespace </span>worklet</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;{</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="namespaceviskores_1_1worklet_1_1streamline.html">   40</a></span>&#160;<span class="keyword">namespace </span>streamline</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;{</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">// Take this out when defined in CellShape.h</span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="namespaceviskores_1_1worklet_1_1streamline.html#a7841ba400cac1e934bb37b397f270f9c">   43</a></span>&#160;<span class="keyword">const</span> <a class="code" href="namespaceviskores.html#afea83468f8cfcf7f649b1fd42d117a0d">viskores::UInt8</a> <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#a7841ba400cac1e934bb37b397f270f9c">CELL_SHAPE_POLY_LINE</a> = 4;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1">   45</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1">StreamLineMode</a></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1af5906e8b5fb5fefc54c06163a650b975">   47</a></span>&#160;  <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1af5906e8b5fb5fefc54c06163a650b975">FORWARD</a> = 0,</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1a65f1ae0c7c0f36dba493ef0acf090667">   48</a></span>&#160;  <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1a65f1ae0c7c0f36dba493ef0acf090667">BACKWARD</a> = 1,</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1a3fffaf998774cdf5464960825e89b8a9">   49</a></span>&#160;  <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1a3fffaf998774cdf5464960825e89b8a9">BOTH</a> = 2</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;};</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">// Trilinear interpolation to calculate vector data at position</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> FieldType, <span class="keyword">typename</span> PortalType&gt;</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="namespaceviskores_1_1worklet_1_1streamline.html#ab0324e3d81887789fbe284020b8e1d11">   54</a></span>&#160;<a class="code" href="ExportMacros_8h.html#a1859aa5ce5b61da65a9c9898211f2a58">VISKORES_EXEC</a> <a class="code" href="classviskores_1_1Vec.html">viskores::Vec&lt;FieldType, 3&gt;</a> <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#ab0324e3d81887789fbe284020b8e1d11">VecDataAtPos</a>(<a class="code" href="classviskores_1_1Vec.html">viskores::Vec&lt;FieldType, 3&gt;</a> pos,</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                                                       <span class="keyword">const</span> <a class="code" href="classviskores_1_1Vec.html">viskores::Id3</a>&amp; vdims,</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                                                       <span class="keyword">const</span> <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a>&amp; planesize,</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                                                       <span class="keyword">const</span> <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a>&amp; rowsize,</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                                                       <span class="keyword">const</span> PortalType&amp; vecdata)</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="comment">// Adjust initial position to be within bounding box of grid</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespaceviskores.html#aca2ec71d38de7693e10bc433f43dbf40">viskores::IdComponent</a> d = 0; d &lt; 3; d++)</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">if</span> (pos[d] &lt; 0.0f)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      pos[d] = 0.0f;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> (pos[d] &gt; <span class="keyword">static_cast&lt;</span>FieldType<span class="keyword">&gt;</span>(vdims[d] - 1))</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      pos[d] = <span class="keyword">static_cast&lt;</span>FieldType<span class="keyword">&gt;</span>(vdims[d] - 1);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  }</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">// Set the eight corner indices with no wraparound</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="classviskores_1_1Vec.html">viskores::Id3</a> idx000, idx001, idx010, idx011, idx100, idx101, idx110, idx111;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  idx000[0] = <span class="keyword">static_cast&lt;</span><a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a><span class="keyword">&gt;</span>(floor(pos[0]));</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  idx000[1] = <span class="keyword">static_cast&lt;</span><a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a><span class="keyword">&gt;</span>(floor(pos[1]));</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  idx000[2] = <span class="keyword">static_cast&lt;</span><a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a><span class="keyword">&gt;</span>(floor(pos[2]));</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  idx001 = idx000;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  idx001[0] = (idx001[0] + 1) &lt;= vdims[0] - 1 ? idx001[0] + 1 : vdims[0] - 1;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  idx010 = idx000;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  idx010[1] = (idx010[1] + 1) &lt;= vdims[1] - 1 ? idx010[1] + 1 : vdims[1] - 1;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  idx011 = idx010;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  idx011[0] = (idx011[0] + 1) &lt;= vdims[0] - 1 ? idx011[0] + 1 : vdims[0] - 1;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  idx100 = idx000;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  idx100[2] = (idx100[2] + 1) &lt;= vdims[2] - 1 ? idx100[2] + 1 : vdims[2] - 1;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  idx101 = idx100;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  idx101[0] = (idx101[0] + 1) &lt;= vdims[0] - 1 ? idx101[0] + 1 : vdims[0] - 1;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  idx110 = idx100;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  idx110[1] = (idx110[1] + 1) &lt;= vdims[1] - 1 ? idx110[1] + 1 : vdims[1] - 1;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  idx111 = idx110;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  idx111[0] = (idx111[0] + 1) &lt;= vdims[0] - 1 ? idx111[0] + 1 : vdims[0] - 1;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// Get the vecdata at the eight corners</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="classviskores_1_1Vec.html">viskores::Vec&lt;FieldType, 3&gt;</a> v000, v001, v010, v011, v100, v101, v110, v111;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  v000 = vecdata.Get(idx000[2] * planesize + idx000[1] * rowsize + idx000[0]);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  v001 = vecdata.Get(idx001[2] * planesize + idx001[1] * rowsize + idx001[0]);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  v010 = vecdata.Get(idx010[2] * planesize + idx010[1] * rowsize + idx010[0]);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  v011 = vecdata.Get(idx011[2] * planesize + idx011[1] * rowsize + idx011[0]);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  v100 = vecdata.Get(idx100[2] * planesize + idx100[1] * rowsize + idx100[0]);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  v101 = vecdata.Get(idx101[2] * planesize + idx101[1] * rowsize + idx101[0]);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  v110 = vecdata.Get(idx110[2] * planesize + idx110[1] * rowsize + idx110[0]);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  v111 = vecdata.Get(idx111[2] * planesize + idx111[1] * rowsize + idx111[0]);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// Interpolation in X</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="classviskores_1_1Vec.html">viskores::Vec&lt;FieldType, 3&gt;</a> v00, v01, v10, v11;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  FieldType a = pos[0] - <span class="keyword">static_cast&lt;</span>FieldType<span class="keyword">&gt;</span>(floor(pos[0]));</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  v00[0] = (1.0f - a) * v000[0] + a * v001[0];</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  v00[1] = (1.0f - a) * v000[1] + a * v001[1];</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  v00[2] = (1.0f - a) * v000[2] + a * v001[2];</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  v01[0] = (1.0f - a) * v010[0] + a * v011[0];</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  v01[1] = (1.0f - a) * v010[1] + a * v011[1];</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  v01[2] = (1.0f - a) * v010[2] + a * v011[2];</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  v10[0] = (1.0f - a) * v100[0] + a * v101[0];</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  v10[1] = (1.0f - a) * v100[1] + a * v101[1];</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  v10[2] = (1.0f - a) * v100[2] + a * v101[2];</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  v11[0] = (1.0f - a) * v110[0] + a * v111[0];</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  v11[1] = (1.0f - a) * v110[1] + a * v111[1];</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  v11[2] = (1.0f - a) * v110[2] + a * v111[2];</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">// Interpolation in Y</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <a class="code" href="classviskores_1_1Vec.html">viskores::Vec&lt;FieldType, 3&gt;</a> v0, v1;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  a = pos[1] - <span class="keyword">static_cast&lt;</span>FieldType<span class="keyword">&gt;</span>(floor(pos[1]));</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  v0[0] = (1.0f - a) * v00[0] + a * v01[0];</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  v0[1] = (1.0f - a) * v00[1] + a * v01[1];</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  v0[2] = (1.0f - a) * v00[2] + a * v01[2];</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  v1[0] = (1.0f - a) * v10[0] + a * v11[0];</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  v1[1] = (1.0f - a) * v10[1] + a * v11[1];</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  v1[2] = (1.0f - a) * v10[2] + a * v11[2];</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="comment">// Interpolation in Z</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <a class="code" href="classviskores_1_1Vec.html">viskores::Vec&lt;FieldType, 3&gt;</a> v;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  a = pos[2] - <span class="keyword">static_cast&lt;</span>FieldType<span class="keyword">&gt;</span>(floor(pos[2]));</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  v[0] = (1.0f - a) * v0[0] + v1[0];</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  v[1] = (1.0f - a) * v0[1] + v1[1];</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  v[2] = (1.0f - a) * v0[2] + v1[2];</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">return</span> v;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="structviskores_1_1worklet_1_1streamline_1_1IsUnity.html">  140</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structviskores_1_1worklet_1_1streamline_1_1IsUnity.html">IsUnity</a></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;{</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="structviskores_1_1worklet_1_1streamline_1_1IsUnity.html#a75cb1cd870a99f18295a8931048a50af">  143</a></span>&#160;  <a class="code" href="ExportMacros_8h.html#a829aa71cc8ccbad49750154bff908211">VISKORES_EXEC_CONT</a> <span class="keywordtype">bool</span> <a class="code" href="structviskores_1_1worklet_1_1streamline_1_1IsUnity.html#a75cb1cd870a99f18295a8931048a50af">operator()</a>(<span class="keyword">const</span> T&amp; x)<span class="keyword"> const</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">return</span> x == T(1);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;};</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> FieldType&gt;</div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html">  150</a></span>&#160;<span class="keyword">class </span><a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html">MakeStreamLines</a> : <span class="keyword">public</span> <a class="code" href="classviskores_1_1worklet_1_1WorkletMapField.html">viskores::worklet::WorkletMapField</a></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keyword">using</span> <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a3736167c2143bb2fb3b5c9c4623966b1">ControlSignature</a> = void(WholeArrayIn field,</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                                <a class="code" href="structviskores_1_1worklet_1_1WorkletMapField_1_1FieldIn.html">FieldIn</a> seedId,</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                                <a class="code" href="structviskores_1_1worklet_1_1WorkletMapField_1_1FieldIn.html">FieldIn</a> position,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                                WholeArrayOut numIndices,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                                WholeArrayOut validPoint,</div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a3736167c2143bb2fb3b5c9c4623966b1">  158</a></span>&#160;                                WholeArrayOut streamLines);</div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#aacf7711f6461214fe22ac161dd5c1172">  159</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#aacf7711f6461214fe22ac161dd5c1172">ExecutionSignature</a> = void(_1, _2, _3, _4, _5, _6, <a class="code" href="structviskores_1_1exec_1_1arg_1_1VisitIndex.html">VisitIndex</a>);</div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a03784d8952aa22ae6bd2ca35e38ab0f4">  160</a></span>&#160;  <span class="keyword">using</span> InputDomain = _2;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a6e620b1e341488d283e817d2dfcafa41">  162</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="structviskores_1_1worklet_1_1ScatterIdentity.html">ScatterType</a> = <a class="code" href="structviskores_1_1worklet_1_1ScatterUniform.html">viskores::worklet::ScatterUniform&lt;2&gt;</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">  164</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classviskores_1_1Vec.html">viskores::Id3</a> <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>;</div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac69544162953a5750f7debee83919ec2">  165</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac69544162953a5750f7debee83919ec2">maxsteps</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac66b2f083f9e29c376dfadb69fecf7c6">  166</a></span>&#160;  <span class="keyword">const</span> FieldType <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac66b2f083f9e29c376dfadb69fecf7c6">timestep</a>;</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a388e951051bc41122127cce982b6f369">  167</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a388e951051bc41122127cce982b6f369">planesize</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a6119e3d6ccbbb84dccf41a88f6a2cc34">  168</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a6119e3d6ccbbb84dccf41a88f6a2cc34">rowsize</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#aa16c1107d430ce0a46c0c34d3e2278bd">  169</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#aa16c1107d430ce0a46c0c34d3e2278bd">streammode</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <a class="code" href="ExportMacros_8h.html#ae47b94fbf1d55103fa9aeff192d8404b">VISKORES_CONT</a></div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#af15ad4d8a918bb28a90b5d16566438c7">  172</a></span>&#160;  <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#af15ad4d8a918bb28a90b5d16566438c7">MakeStreamLines</a>() {}</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="ExportMacros_8h.html#ae47b94fbf1d55103fa9aeff192d8404b">VISKORES_CONT</a></div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#afdcac9d5714f95d6f37333987b11ac4f">  175</a></span>&#160;  <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#afdcac9d5714f95d6f37333987b11ac4f">MakeStreamLines</a>(<span class="keyword">const</span> FieldType tStep,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                  <span class="keyword">const</span> <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> sMode,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                  <span class="keyword">const</span> <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> nSteps,</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                  <span class="keyword">const</span> <a class="code" href="classviskores_1_1Vec.html">viskores::Id3</a> dims)</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    : <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>(dims)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    , <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac69544162953a5750f7debee83919ec2">maxsteps</a>(nSteps)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    , <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac66b2f083f9e29c376dfadb69fecf7c6">timestep</a>(tStep)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    , <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a388e951051bc41122127cce982b6f369">planesize</a>(dims[0] * dims[1])</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    , <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a6119e3d6ccbbb84dccf41a88f6a2cc34">rowsize</a>(dims[0])</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    , <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#aa16c1107d430ce0a46c0c34d3e2278bd">streammode</a>(sMode)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> FieldPortalType, <span class="keyword">typename</span> IdComponentPortalType, <span class="keyword">typename</span> FieldVec3PortalType&gt;</div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a4d1fcb95ca5e8fd32020f31f791af575">  189</a></span>&#160;  <a class="code" href="ExportMacros_8h.html#a1859aa5ce5b61da65a9c9898211f2a58">VISKORES_EXEC</a> <span class="keywordtype">void</span> <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a4d1fcb95ca5e8fd32020f31f791af575">operator()</a>(<span class="keyword">const</span> FieldPortalType&amp; field,</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                                <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a>&amp; seedId,</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                <a class="code" href="classviskores_1_1Vec.html">viskores::Vec&lt;FieldType, 3&gt;</a>&amp; seedPos,</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                IdComponentPortalType&amp; numIndices,</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                                IdComponentPortalType&amp; validPoint,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                                FieldVec3PortalType&amp; slLists,</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                                <a class="code" href="namespaceviskores.html#aca2ec71d38de7693e10bc433f43dbf40">viskores::IdComponent</a> visitIndex)<span class="keyword"> const</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="keyword">  </span>{</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment">// Set initial offset into the output streams array</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="classviskores_1_1Vec.html">viskores::Vec&lt;FieldType, 3&gt;</a> pos = seedPos;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="classviskores_1_1Vec.html">viskores::Vec&lt;FieldType, 3&gt;</a> pre_pos = seedPos;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// Forward tracing</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (visitIndex == 0 &amp;&amp; (<a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#aa16c1107d430ce0a46c0c34d3e2278bd">streammode</a> == <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1af5906e8b5fb5fefc54c06163a650b975">FORWARD</a> || <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#aa16c1107d430ce0a46c0c34d3e2278bd">streammode</a> == <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1a3fffaf998774cdf5464960825e89b8a9">BOTH</a>))</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> index = (seedId * 2) * <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac69544162953a5750f7debee83919ec2">maxsteps</a>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="keywordtype">bool</span> done = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> step = 0;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      validPoint.Set(index, 1);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      slLists.Set(index++, pos);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">while</span> (done != <span class="keyword">true</span> &amp;&amp; step &lt; <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac69544162953a5750f7debee83919ec2">maxsteps</a>)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <a class="code" href="classviskores_1_1Vec.html">viskores::Vec&lt;FieldType, 3&gt;</a> vdata, adata, bdata, cdata, ddata;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        vdata = <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#ab0324e3d81887789fbe284020b8e1d11">VecDataAtPos</a>(pos, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a388e951051bc41122127cce982b6f369">planesize</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a6119e3d6ccbbb84dccf41a88f6a2cc34">rowsize</a>, field);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="namespaceviskores.html#aca2ec71d38de7693e10bc433f43dbf40">viskores::IdComponent</a> d = 0; d &lt; 3; d++)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;          adata[d] = <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac66b2f083f9e29c376dfadb69fecf7c6">timestep</a> * vdata[d];</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;          pos[d] += adata[d] / 2.0f;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        vdata = <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#ab0324e3d81887789fbe284020b8e1d11">VecDataAtPos</a>(pos, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a388e951051bc41122127cce982b6f369">planesize</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a6119e3d6ccbbb84dccf41a88f6a2cc34">rowsize</a>, field);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="namespaceviskores.html#aca2ec71d38de7693e10bc433f43dbf40">viskores::IdComponent</a> d = 0; d &lt; 3; d++)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;          bdata[d] = <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac66b2f083f9e29c376dfadb69fecf7c6">timestep</a> * vdata[d];</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;          pos[d] += bdata[d] / 2.0f;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        vdata = <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#ab0324e3d81887789fbe284020b8e1d11">VecDataAtPos</a>(pos, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a388e951051bc41122127cce982b6f369">planesize</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a6119e3d6ccbbb84dccf41a88f6a2cc34">rowsize</a>, field);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="namespaceviskores.html#aca2ec71d38de7693e10bc433f43dbf40">viskores::IdComponent</a> d = 0; d &lt; 3; d++)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;          cdata[d] = <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac66b2f083f9e29c376dfadb69fecf7c6">timestep</a> * vdata[d];</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;          pos[d] += cdata[d] / 2.0f;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        vdata = <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#ab0324e3d81887789fbe284020b8e1d11">VecDataAtPos</a>(pos, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a388e951051bc41122127cce982b6f369">planesize</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a6119e3d6ccbbb84dccf41a88f6a2cc34">rowsize</a>, field);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="namespaceviskores.html#aca2ec71d38de7693e10bc433f43dbf40">viskores::IdComponent</a> d = 0; d &lt; 3; d++)</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;          ddata[d] = <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac66b2f083f9e29c376dfadb69fecf7c6">timestep</a> * vdata[d];</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;          pos[d] += (adata[d] + (2.0f * bdata[d]) + (2.0f * cdata[d]) + ddata[d]) / 6.0f;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">if</span> (pos[0] &lt; 0.0f || pos[0] &gt; <span class="keyword">static_cast&lt;</span>FieldType<span class="keyword">&gt;</span>(<a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>[0]) || pos[1] &lt; 0.0f ||</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            pos[1] &gt; <span class="keyword">static_cast&lt;</span>FieldType<span class="keyword">&gt;</span>(<a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>[1]) || pos[2] &lt; 0.0f ||</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            pos[2] &gt; <span class="keyword">static_cast&lt;</span>FieldType<span class="keyword">&gt;</span>(<a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>[2]))</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;          pos = pre_pos;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;          done = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;          validPoint.Set(index, 1);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;          slLists.Set(index++, pos);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;          pre_pos = pos;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        step++;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      numIndices.Set(seedId * 2, <span class="keyword">static_cast&lt;</span><a class="code" href="namespaceviskores.html#aca2ec71d38de7693e10bc433f43dbf40">viskores::IdComponent</a><span class="keyword">&gt;</span>(step));</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">// Backward tracing</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (visitIndex == 1 &amp;&amp; (<a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#aa16c1107d430ce0a46c0c34d3e2278bd">streammode</a> == <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1a65f1ae0c7c0f36dba493ef0acf090667">BACKWARD</a> || <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#aa16c1107d430ce0a46c0c34d3e2278bd">streammode</a> == <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1a3fffaf998774cdf5464960825e89b8a9">BOTH</a>))</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> index = (seedId * 2 + 1) * <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac69544162953a5750f7debee83919ec2">maxsteps</a>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keywordtype">bool</span> done = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> step = 0;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      validPoint.Set(index, 1);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      slLists.Set(index++, pos);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordflow">while</span> (done != <span class="keyword">true</span> &amp;&amp; step &lt; <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac69544162953a5750f7debee83919ec2">maxsteps</a>)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <a class="code" href="classviskores_1_1Vec.html">viskores::Vec&lt;FieldType, 3&gt;</a> vdata, adata, bdata, cdata, ddata;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        vdata = <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#ab0324e3d81887789fbe284020b8e1d11">VecDataAtPos</a>(pos, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a388e951051bc41122127cce982b6f369">planesize</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a6119e3d6ccbbb84dccf41a88f6a2cc34">rowsize</a>, field);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="namespaceviskores.html#aca2ec71d38de7693e10bc433f43dbf40">viskores::IdComponent</a> d = 0; d &lt; 3; d++)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;          adata[d] = <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac66b2f083f9e29c376dfadb69fecf7c6">timestep</a> * (0.0f - vdata[d]);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;          pos[d] += adata[d] / 2.0f;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        vdata = <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#ab0324e3d81887789fbe284020b8e1d11">VecDataAtPos</a>(pos, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a388e951051bc41122127cce982b6f369">planesize</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a6119e3d6ccbbb84dccf41a88f6a2cc34">rowsize</a>, field);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="namespaceviskores.html#aca2ec71d38de7693e10bc433f43dbf40">viskores::IdComponent</a> d = 0; d &lt; 3; d++)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;          bdata[d] = <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac66b2f083f9e29c376dfadb69fecf7c6">timestep</a> * (0.0f - vdata[d]);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;          pos[d] += bdata[d] / 2.0f;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        vdata = <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#ab0324e3d81887789fbe284020b8e1d11">VecDataAtPos</a>(pos, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a388e951051bc41122127cce982b6f369">planesize</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a6119e3d6ccbbb84dccf41a88f6a2cc34">rowsize</a>, field);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="namespaceviskores.html#aca2ec71d38de7693e10bc433f43dbf40">viskores::IdComponent</a> d = 0; d &lt; 3; d++)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;          cdata[d] = <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac66b2f083f9e29c376dfadb69fecf7c6">timestep</a> * (0.0f - vdata[d]);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;          pos[d] += cdata[d] / 2.0f;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        vdata = <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#ab0324e3d81887789fbe284020b8e1d11">VecDataAtPos</a>(pos, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a388e951051bc41122127cce982b6f369">planesize</a>, <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a6119e3d6ccbbb84dccf41a88f6a2cc34">rowsize</a>, field);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="namespaceviskores.html#aca2ec71d38de7693e10bc433f43dbf40">viskores::IdComponent</a> d = 0; d &lt; 3; d++)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;          ddata[d] = <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac66b2f083f9e29c376dfadb69fecf7c6">timestep</a> * (0.0f - vdata[d]);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;          pos[d] += (adata[d] + (2.0f * bdata[d]) + (2.0f * cdata[d]) + ddata[d]) / 6.0f;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">if</span> (pos[0] &lt; 0.0f || pos[0] &gt; <span class="keyword">static_cast&lt;</span>FieldType<span class="keyword">&gt;</span>(<a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>[0]) || pos[1] &lt; 0.0f ||</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            pos[1] &gt; <span class="keyword">static_cast&lt;</span>FieldType<span class="keyword">&gt;</span>(<a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>[1]) || pos[2] &lt; 0.0f ||</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            pos[2] &gt; <span class="keyword">static_cast&lt;</span>FieldType<span class="keyword">&gt;</span>(<a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">vdims</a>[2]))</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;          pos = pre_pos;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;          done = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;          validPoint.Set(index, 1);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;          slLists.Set(index++, pos);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;          pre_pos = pos;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        step++;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      numIndices.Set((seedId * 2) + 1, <span class="keyword">static_cast&lt;</span><a class="code" href="namespaceviskores.html#aca2ec71d38de7693e10bc433f43dbf40">viskores::IdComponent</a><span class="keyword">&gt;</span>(step));</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;};</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;} <span class="comment">// namespace streamline</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> FieldType&gt;</div>
<div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1StreamLineFilterUniformGrid.html">  324</a></span>&#160;<span class="keyword">class </span><a class="code" href="classviskores_1_1worklet_1_1StreamLineFilterUniformGrid.html">StreamLineFilterUniformGrid</a></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;{</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1StreamLineFilterUniformGrid.html#ab1df316a9efbb7a64335b83f95db282d">  327</a></span>&#160;  <a class="code" href="classviskores_1_1worklet_1_1StreamLineFilterUniformGrid.html#ab1df316a9efbb7a64335b83f95db282d">StreamLineFilterUniformGrid</a>() {}</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="classviskores_1_1worklet_1_1StreamLineFilterUniformGrid.html#aeb40eb126323edbcf8099896935a7f05">  329</a></span>&#160;  <a class="code" href="classviskores_1_1cont_1_1DataSet.html">viskores::cont::DataSet</a> <a class="code" href="classviskores_1_1worklet_1_1StreamLineFilterUniformGrid.html#aeb40eb126323edbcf8099896935a7f05">Run</a>(<span class="keyword">const</span> <a class="code" href="classviskores_1_1cont_1_1DataSet.html">viskores::cont::DataSet</a>&amp; InDataSet,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                              <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> streamMode,</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                              <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> numSeeds,</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                              <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> maxSteps,</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                              FieldType timeStep)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keyword">using</span> Algorithm = <a class="code" href="structviskores_1_1cont_1_1Algorithm.html">viskores::cont::Algorithm</a>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">// Get information from input dataset</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="classviskores_1_1cont_1_1CellSetStructured.html">viskores::cont::CellSetStructured&lt;3&gt;</a> inCellSet;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    InDataSet.<a class="code" href="classviskores_1_1cont_1_1DataSet.html#a37db7e4d32eb8bad6d5343d059285ead">GetCellSet</a>().<a class="code" href="classviskores_1_1cont_1_1UnknownCellSet.html#a7612352031b7f3a4faf68ebdc65059a2">AsCellSet</a>(inCellSet);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="classviskores_1_1Vec.html">viskores::Id3</a> vdims = inCellSet.<a class="code" href="classviskores_1_1cont_1_1CellSetStructured.html#afd89ee5969a47f491f1ba251f641fd50">GetSchedulingRange</a>(<a class="code" href="structviskores_1_1TopologyElementTagPoint.html">viskores::TopologyElementTagPoint</a>());</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="classviskores_1_1cont_1_1ArrayHandle.html">viskores::cont::ArrayHandle&lt;viskores::Vec&lt;FieldType, 3&gt;</a>&gt; fieldArray;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    InDataSet.<a class="code" href="classviskores_1_1cont_1_1DataSet.html#a2071579cf18dbdec014270734e2fa660">GetField</a>(<span class="stringliteral">&quot;vecData&quot;</span>).<a class="code" href="classviskores_1_1cont_1_1Field.html#a1c97ee63af77aeb6ae1deb173a7c3a39">GetData</a>().<a class="code" href="classviskores_1_1cont_1_1UnknownArrayHandle.html#a5bd19cc2cefd571d9106340cd4ec85fb">AsArrayHandle</a>(fieldArray);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">// Generate random seeds for starting streamlines</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="classviskores_1_1cont_1_1ArrayHandle.html">viskores::cont::ArrayHandle&lt;viskores::Vec&lt;FieldType, 3&gt;</a>&gt; seedPosArray;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    seedPosArray.<a class="code" href="classviskores_1_1cont_1_1ArrayHandle.html#a603363f20df24f1e3e123261531a38c7">Allocate</a>(numSeeds);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keyword">auto</span> seedPosPortal = seedPosArray.<a class="code" href="classviskores_1_1cont_1_1ArrayHandle.html#abe5d93aa07c249d3a5a375a8c8229eff">WritePortal</a>();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> i = 0; i &lt; numSeeds; i++)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <a class="code" href="classviskores_1_1Vec.html">viskores::Vec&lt;FieldType, 3&gt;</a> seed;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        seed[0] = <span class="keyword">static_cast&lt;</span>FieldType<span class="keyword">&gt;</span>(rand() % vdims[0]);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        seed[1] = <span class="keyword">static_cast&lt;</span>FieldType<span class="keyword">&gt;</span>(rand() % vdims[1]);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        seed[2] = <span class="keyword">static_cast&lt;</span>FieldType<span class="keyword">&gt;</span>(rand() % vdims[2]);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        seedPosPortal.Set(i, seed);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="classviskores_1_1cont_1_1ArrayHandleIndex.html">viskores::cont::ArrayHandleIndex</a> seedIdArray(numSeeds);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// Number of streams * number of steps * [forward, backward]</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> numCells = numSeeds * 2;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> maxConnectivityLen = numCells * maxSteps;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">// Stream array at max size will be filled with stream coordinates</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="classviskores_1_1cont_1_1ArrayHandle.html">viskores::cont::ArrayHandle&lt;viskores::Vec&lt;FieldType, 3&gt;</a>&gt; streamArray;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    streamArray.<a class="code" href="classviskores_1_1cont_1_1ArrayHandle.html#a603363f20df24f1e3e123261531a38c7">Allocate</a>(maxConnectivityLen);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// NumIndices per polyline cell filled in by MakeStreamLines</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="classviskores_1_1cont_1_1ArrayHandle.html">viskores::cont::ArrayHandle&lt;viskores::IdComponent&gt;</a> numIndices;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    numIndices.<a class="code" href="classviskores_1_1cont_1_1ArrayHandle.html#a603363f20df24f1e3e123261531a38c7">Allocate</a>(numCells);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">// All cells are polylines</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="classviskores_1_1cont_1_1ArrayHandle.html">viskores::cont::ArrayHandle&lt;viskores::UInt8&gt;</a> cellTypes;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    cellTypes.<a class="code" href="classviskores_1_1cont_1_1ArrayHandle.html#a603363f20df24f1e3e123261531a38c7">Allocate</a>(numCells);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="classviskores_1_1cont_1_1ArrayHandleConstant.html">viskores::cont::ArrayHandleConstant&lt;viskores::UInt8&gt;</a> polyLineShape(</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <a class="code" href="namespaceviskores_1_1worklet_1_1streamline.html#a7841ba400cac1e934bb37b397f270f9c">streamline::CELL_SHAPE_POLY_LINE</a>, numCells);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    Algorithm::Copy(polyLineShape, cellTypes);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="comment">// Possible maxSteps points but if less use stencil</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="classviskores_1_1cont_1_1ArrayHandle.html">viskores::cont::ArrayHandle&lt;viskores::IdComponent&gt;</a> validPoint;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="classviskores_1_1cont_1_1ArrayHandleConstant.html">viskores::cont::ArrayHandleConstant&lt;viskores::Id&gt;</a> zeros(0, maxConnectivityLen);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    validPoint.<a class="code" href="classviskores_1_1cont_1_1ArrayHandle.html#a603363f20df24f1e3e123261531a38c7">Allocate</a>(maxConnectivityLen);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    Algorithm::Copy(zeros, validPoint);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="comment">// Worklet to make the streamlines</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html">streamline::MakeStreamLines&lt;FieldType&gt;</a> makeStreamLines(timeStep, streamMode, maxSteps, vdims);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <a class="code" href="structviskores_1_1cont_1_1Invoker.html">viskores::cont::Invoker</a>{}(</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      makeStreamLines, fieldArray, seedIdArray, seedPosArray, numIndices, validPoint, streamArray);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="comment">// Size of connectivity based on size of returned streamlines</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a> connectivityLen;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keyword">auto</span> offsets = <a class="code" href="namespaceviskores_1_1cont.html#a94eb61894ec5cb45eafd588185859b0a">viskores::cont::ConvertNumComponentsToOffsets</a>(numIndices, connectivityLen);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="comment">// Connectivity is sequential</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="classviskores_1_1cont_1_1ArrayHandleCounting.html">viskores::cont::ArrayHandleCounting&lt;viskores::Id&gt;</a> connCount(0, 1, connectivityLen);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="classviskores_1_1cont_1_1ArrayHandle.html">viskores::cont::ArrayHandle&lt;viskores::Id&gt;</a> connectivity;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    Algorithm::Copy(connCount, connectivity);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment">// Compact the stream array so it only has valid points</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="classviskores_1_1cont_1_1ArrayHandle.html">viskores::cont::ArrayHandle&lt;viskores::Vec&lt;FieldType, 3&gt;</a>&gt; coordinates;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    Algorithm::CopyIf(streamArray, validPoint, coordinates, <a class="code" href="structviskores_1_1worklet_1_1streamline_1_1IsUnity.html">streamline::IsUnity</a>());</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">// Create the output data set</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <a class="code" href="classviskores_1_1cont_1_1DataSet.html">viskores::cont::DataSet</a> OutDataSet;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="classviskores_1_1cont_1_1CellSetExplicit.html">viskores::cont::CellSetExplicit&lt;&gt;</a> outCellSet;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    outCellSet.<a class="code" href="classviskores_1_1cont_1_1CellSetExplicit.html#a2ebc89b0a0cab6befb948524751a63f2">Fill</a>(coordinates.<a class="code" href="classviskores_1_1cont_1_1ArrayHandle.html#ad084795021c8600def1edbc8b1872921">GetNumberOfValues</a>(), cellTypes, connectivity, offsets);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    OutDataSet.<a class="code" href="classviskores_1_1cont_1_1DataSet.html#a88c9e49db93d710a27201000f67f61a9">SetCellSet</a>(outCellSet);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    OutDataSet.<a class="code" href="classviskores_1_1cont_1_1DataSet.html#a77f12bba1179f5e50b8d4019f1a43334">AddCoordinateSystem</a>(<a class="code" href="classviskores_1_1cont_1_1CoordinateSystem.html">viskores::cont::CoordinateSystem</a>(<span class="stringliteral">&quot;coordinates&quot;</span>, coordinates));</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span> OutDataSet;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;};</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="preprocessor">#endif // viskores_worklet_StreamLineUniformGrid_h</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aArrayHandle_8h_html"><div class="ttname"><a href="ArrayHandle_8h.html">ArrayHandle.h</a></div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1DataSet_html"><div class="ttname"><a href="classviskores_1_1cont_1_1DataSet.html">viskores::cont::DataSet</a></div><div class="ttdoc">Contains and manages the geometric data structures that Viskores operates on.</div><div class="ttdef"><b>Definition:</b> DataSet.h:66</div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1streamline_1_1MakeStreamLines_html_acc3e9c9d18d2dbd06742ec48910688c7"><div class="ttname"><a href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#acc3e9c9d18d2dbd06742ec48910688c7">viskores::worklet::streamline::MakeStreamLines::vdims</a></div><div class="ttdeci">const viskores::Id3 vdims</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:164</div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1StreamLineFilterUniformGrid_html_aeb40eb126323edbcf8099896935a7f05"><div class="ttname"><a href="classviskores_1_1worklet_1_1StreamLineFilterUniformGrid.html#aeb40eb126323edbcf8099896935a7f05">viskores::worklet::StreamLineFilterUniformGrid::Run</a></div><div class="ttdeci">viskores::cont::DataSet Run(const viskores::cont::DataSet &amp;InDataSet, viskores::Id streamMode, viskores::Id numSeeds, viskores::Id maxSteps, FieldType timeStep)</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:329</div></div>
<div class="ttc" id="aWorkletMapField_8h_html"><div class="ttname"><a href="WorkletMapField_8h.html">WorkletMapField.h</a></div></div>
<div class="ttc" id="aCellSetExplicit_8h_html"><div class="ttname"><a href="CellSetExplicit_8h.html">CellSetExplicit.h</a></div></div>
<div class="ttc" id="aScatterUniform_8h_html"><div class="ttname"><a href="ScatterUniform_8h.html">ScatterUniform.h</a></div></div>
<div class="ttc" id="anamespaceviskores_1_1worklet_1_1streamline_html_ab0324e3d81887789fbe284020b8e1d11"><div class="ttname"><a href="namespaceviskores_1_1worklet_1_1streamline.html#ab0324e3d81887789fbe284020b8e1d11">viskores::worklet::streamline::VecDataAtPos</a></div><div class="ttdeci">viskores::Vec&lt; FieldType, 3 &gt; VecDataAtPos(viskores::Vec&lt; FieldType, 3 &gt; pos, const viskores::Id3 &amp;vdims, const viskores::Id &amp;planesize, const viskores::Id &amp;rowsize, const PortalType &amp;vecdata)</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:54</div></div>
<div class="ttc" id="astructviskores_1_1worklet_1_1WorkletMapField_1_1FieldIn_html"><div class="ttname"><a href="structviskores_1_1worklet_1_1WorkletMapField_1_1FieldIn.html">viskores::worklet::WorkletMapField::FieldIn</a></div><div class="ttdoc">A control signature tag for input fields.</div><div class="ttdef"><b>Definition:</b> WorkletMapField.h:68</div></div>
<div class="ttc" id="astructviskores_1_1worklet_1_1streamline_1_1IsUnity_html_a75cb1cd870a99f18295a8931048a50af"><div class="ttname"><a href="structviskores_1_1worklet_1_1streamline_1_1IsUnity.html#a75cb1cd870a99f18295a8931048a50af">viskores::worklet::streamline::IsUnity::operator()</a></div><div class="ttdeci">bool operator()(const T &amp;x) const</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:143</div></div>
<div class="ttc" id="astructviskores_1_1cont_1_1Algorithm_html"><div class="ttname"><a href="structviskores_1_1cont_1_1Algorithm.html">viskores::cont::Algorithm</a></div><div class="ttdef"><b>Definition:</b> Algorithm.h:397</div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1StreamLineFilterUniformGrid_html_ab1df316a9efbb7a64335b83f95db282d"><div class="ttname"><a href="classviskores_1_1worklet_1_1StreamLineFilterUniformGrid.html#ab1df316a9efbb7a64335b83f95db282d">viskores::worklet::StreamLineFilterUniformGrid::StreamLineFilterUniformGrid</a></div><div class="ttdeci">StreamLineFilterUniformGrid()</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:327</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1Field_html_a1c97ee63af77aeb6ae1deb173a7c3a39"><div class="ttname"><a href="classviskores_1_1cont_1_1Field.html#a1c97ee63af77aeb6ae1deb173a7c3a39">viskores::cont::Field::GetData</a></div><div class="ttdeci">const viskores::cont::UnknownArrayHandle &amp; GetData() const</div><div class="ttdoc">Get the array of the data for the field.</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1ArrayHandle_html"><div class="ttname"><a href="classviskores_1_1cont_1_1ArrayHandle.html">viskores::cont::ArrayHandle</a></div><div class="ttdoc">Manages an array-worth of data.</div><div class="ttdef"><b>Definition:</b> ArrayHandle.h:313</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1CoordinateSystem_html"><div class="ttname"><a href="classviskores_1_1cont_1_1CoordinateSystem.html">viskores::cont::CoordinateSystem</a></div><div class="ttdoc">Manages a coordinate system for a DataSet.</div><div class="ttdef"><b>Definition:</b> CoordinateSystem.h:38</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1DataSet_html_a2071579cf18dbdec014270734e2fa660"><div class="ttname"><a href="classviskores_1_1cont_1_1DataSet.html#a2071579cf18dbdec014270734e2fa660">viskores::cont::DataSet::GetField</a></div><div class="ttdeci">const viskores::cont::Field &amp; GetField(viskores::Id index) const</div><div class="ttdoc">Retrieves a field by index.</div><div class="ttdef"><b>Definition:</b> DataSet.h:117</div></div>
<div class="ttc" id="aInvoker_8h_html"><div class="ttname"><a href="Invoker_8h.html">Invoker.h</a></div></div>
<div class="ttc" id="anamespaceviskores_html_aca2ec71d38de7693e10bc433f43dbf40"><div class="ttname"><a href="namespaceviskores.html#aca2ec71d38de7693e10bc433f43dbf40">viskores::IdComponent</a></div><div class="ttdeci">viskores::Int32 IdComponent</div><div class="ttdoc">Base type to use to index small lists.</div><div class="ttdef"><b>Definition:</b> Types.h:202</div></div>
<div class="ttc" id="aExportMacros_8h_html_a829aa71cc8ccbad49750154bff908211"><div class="ttname"><a href="ExportMacros_8h.html#a829aa71cc8ccbad49750154bff908211">VISKORES_EXEC_CONT</a></div><div class="ttdeci">#define VISKORES_EXEC_CONT</div><div class="ttdef"><b>Definition:</b> ExportMacros.h:60</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1CellSetStructured_html_afd89ee5969a47f491f1ba251f641fd50"><div class="ttname"><a href="classviskores_1_1cont_1_1CellSetStructured.html#afd89ee5969a47f491f1ba251f641fd50">viskores::cont::CellSetStructured::GetSchedulingRange</a></div><div class="ttdeci">SchedulingRangeType GetSchedulingRange(TopologyElement) const</div><div class="ttdef"><b>Definition:</b> CellSetStructured.h:140</div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1streamline_1_1MakeStreamLines_html_a4d1fcb95ca5e8fd32020f31f791af575"><div class="ttname"><a href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a4d1fcb95ca5e8fd32020f31f791af575">viskores::worklet::streamline::MakeStreamLines::operator()</a></div><div class="ttdeci">void operator()(const FieldPortalType &amp;field, viskores::Id &amp;seedId, viskores::Vec&lt; FieldType, 3 &gt; &amp;seedPos, IdComponentPortalType &amp;numIndices, IdComponentPortalType &amp;validPoint, FieldVec3PortalType &amp;slLists, viskores::IdComponent visitIndex) const</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:189</div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1StreamLineFilterUniformGrid_html"><div class="ttname"><a href="classviskores_1_1worklet_1_1StreamLineFilterUniformGrid.html">viskores::worklet::StreamLineFilterUniformGrid</a></div><div class="ttdoc">Compute the streamline.</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:324</div></div>
<div class="ttc" id="astructviskores_1_1TopologyElementTagPoint_html"><div class="ttname"><a href="structviskores_1_1TopologyElementTagPoint.html">viskores::TopologyElementTagPoint</a></div><div class="ttdoc">A tag used to identify the point elements in a topology.</div><div class="ttdef"><b>Definition:</b> TopologyElementTag.h:42</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1DataSet_html_a77f12bba1179f5e50b8d4019f1a43334"><div class="ttname"><a href="classviskores_1_1cont_1_1DataSet.html#a77f12bba1179f5e50b8d4019f1a43334">viskores::cont::DataSet::AddCoordinateSystem</a></div><div class="ttdeci">viskores::IdComponent AddCoordinateSystem(const viskores::cont::CoordinateSystem &amp;cs)</div><div class="ttdoc">Adds the given CoordinateSystem to the DataSet.</div></div>
<div class="ttc" id="astructviskores_1_1worklet_1_1streamline_1_1IsUnity_html"><div class="ttname"><a href="structviskores_1_1worklet_1_1streamline_1_1IsUnity.html">viskores::worklet::streamline::IsUnity</a></div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:140</div></div>
<div class="ttc" id="aDeviceAdapter_8h_html"><div class="ttname"><a href="DeviceAdapter_8h.html">DeviceAdapter.h</a></div></div>
<div class="ttc" id="astructviskores_1_1exec_1_1arg_1_1VisitIndex_html"><div class="ttname"><a href="structviskores_1_1exec_1_1arg_1_1VisitIndex.html">viskores::exec::arg::VisitIndex</a></div><div class="ttdoc">The ExecutionSignature tag to use to get the visit index.</div><div class="ttdef"><b>Definition:</b> VisitIndex.h:54</div></div>
<div class="ttc" id="anamespaceviskores_1_1worklet_1_1streamline_html_a166bd757412422cf2a2c1dd3e1c624f1a65f1ae0c7c0f36dba493ef0acf090667"><div class="ttname"><a href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1a65f1ae0c7c0f36dba493ef0acf090667">viskores::worklet::streamline::BACKWARD</a></div><div class="ttdeci">@ BACKWARD</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:48</div></div>
<div class="ttc" id="anamespaceviskores_html_a8e82cb49e20cef45fbeb58dc58790216"><div class="ttname"><a href="namespaceviskores.html#a8e82cb49e20cef45fbeb58dc58790216">viskores::Id</a></div><div class="ttdeci">viskores::Int64 Id</div><div class="ttdoc">Base type to use to index arrays.</div><div class="ttdef"><b>Definition:</b> Types.h:235</div></div>
<div class="ttc" id="aExportMacros_8h_html_ae47b94fbf1d55103fa9aeff192d8404b"><div class="ttname"><a href="ExportMacros_8h.html#ae47b94fbf1d55103fa9aeff192d8404b">VISKORES_CONT</a></div><div class="ttdeci">#define VISKORES_CONT</div><div class="ttdef"><b>Definition:</b> ExportMacros.h:65</div></div>
<div class="ttc" id="anamespaceviskores_html"><div class="ttname"><a href="namespaceviskores.html">viskores</a></div><div class="ttdoc">Groups connected points that have the same field value.</div><div class="ttdef"><b>Definition:</b> Atomic.h:27</div></div>
<div class="ttc" id="aAlgorithm_8h_html"><div class="ttname"><a href="Algorithm_8h.html">Algorithm.h</a></div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1streamline_1_1MakeStreamLines_html_afdcac9d5714f95d6f37333987b11ac4f"><div class="ttname"><a href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#afdcac9d5714f95d6f37333987b11ac4f">viskores::worklet::streamline::MakeStreamLines::MakeStreamLines</a></div><div class="ttdeci">MakeStreamLines(const FieldType tStep, const viskores::Id sMode, const viskores::Id nSteps, const viskores::Id3 dims)</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:175</div></div>
<div class="ttc" id="anamespaceviskores_1_1worklet_1_1streamline_html_a7841ba400cac1e934bb37b397f270f9c"><div class="ttname"><a href="namespaceviskores_1_1worklet_1_1streamline.html#a7841ba400cac1e934bb37b397f270f9c">viskores::worklet::streamline::CELL_SHAPE_POLY_LINE</a></div><div class="ttdeci">const viskores::UInt8 CELL_SHAPE_POLY_LINE</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:43</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1ArrayHandleConstant_html"><div class="ttname"><a href="classviskores_1_1cont_1_1ArrayHandleConstant.html">viskores::cont::ArrayHandleConstant</a></div><div class="ttdoc">An array handle with a constant value.</div><div class="ttdef"><b>Definition:</b> ArrayHandleConstant.h:78</div></div>
<div class="ttc" id="astructviskores_1_1worklet_1_1ScatterIdentity_html"><div class="ttname"><a href="structviskores_1_1worklet_1_1ScatterIdentity.html">viskores::worklet::ScatterIdentity</a></div><div class="ttdoc">A scatter that maps input directly to output.</div><div class="ttdef"><b>Definition:</b> ScatterIdentity.h:38</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1ArrayHandle_html_a603363f20df24f1e3e123261531a38c7"><div class="ttname"><a href="classviskores_1_1cont_1_1ArrayHandle.html#a603363f20df24f1e3e123261531a38c7">viskores::cont::ArrayHandle::Allocate</a></div><div class="ttdeci">void Allocate(viskores::Id numberOfValues, viskores::CopyFlag preserve, viskores::cont::Token &amp;token) const</div><div class="ttdoc">Allocates an array large enough to hold the given number of values.</div><div class="ttdef"><b>Definition:</b> ArrayHandle.h:504</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1CellSetExplicit_html"><div class="ttname"><a href="classviskores_1_1cont_1_1CellSetExplicit.html">viskores::cont::CellSetExplicit</a></div><div class="ttdoc">Defines an irregular collection of cells.</div><div class="ttdef"><b>Definition:</b> CastAndCall.h:44</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1ArrayHandle_html_ad084795021c8600def1edbc8b1872921"><div class="ttname"><a href="classviskores_1_1cont_1_1ArrayHandle.html#ad084795021c8600def1edbc8b1872921">viskores::cont::ArrayHandle::GetNumberOfValues</a></div><div class="ttdeci">viskores::Id GetNumberOfValues() const</div><div class="ttdoc">Returns the number of entries in the array.</div><div class="ttdef"><b>Definition:</b> ArrayHandle.h:482</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1ArrayHandleCounting_html"><div class="ttname"><a href="classviskores_1_1cont_1_1ArrayHandleCounting.html">viskores::cont::ArrayHandleCounting</a></div><div class="ttdoc">ArrayHandleCounting is a specialization of ArrayHandle.</div><div class="ttdef"><b>Definition:</b> ArrayHandleCounting.h:140</div></div>
<div class="ttc" id="aField_8h_html"><div class="ttname"><a href="Field_8h.html">Field.h</a></div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1streamline_1_1MakeStreamLines_html"><div class="ttname"><a href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html">viskores::worklet::streamline::MakeStreamLines</a></div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:150</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1UnknownArrayHandle_html_a5bd19cc2cefd571d9106340cd4ec85fb"><div class="ttname"><a href="classviskores_1_1cont_1_1UnknownArrayHandle.html#a5bd19cc2cefd571d9106340cd4ec85fb">viskores::cont::UnknownArrayHandle::AsArrayHandle</a></div><div class="ttdeci">void AsArrayHandle(viskores::cont::ArrayHandle&lt; T, S &gt; &amp;array) const</div><div class="ttdoc">Returns this array cast appropriately and stored in the given ArrayHandle type.</div><div class="ttdef"><b>Definition:</b> UnknownArrayHandle.h:679</div></div>
<div class="ttc" id="anamespaceviskores_1_1worklet_1_1streamline_html_a166bd757412422cf2a2c1dd3e1c624f1af5906e8b5fb5fefc54c06163a650b975"><div class="ttname"><a href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1af5906e8b5fb5fefc54c06163a650b975">viskores::worklet::streamline::FORWARD</a></div><div class="ttdeci">@ FORWARD</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:47</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1CellSetExplicit_html_a2ebc89b0a0cab6befb948524751a63f2"><div class="ttname"><a href="classviskores_1_1cont_1_1CellSetExplicit.html#a2ebc89b0a0cab6befb948524751a63f2">viskores::cont::CellSetExplicit::Fill</a></div><div class="ttdeci">void Fill(viskores::Id numPoints, const viskores::cont::ArrayHandle&lt; viskores::UInt8, ShapesStorageTag &gt; &amp;cellTypes, const viskores::cont::ArrayHandle&lt; viskores::Id, ConnectivityStorageTag &gt; &amp;connectivity, const viskores::cont::ArrayHandle&lt; viskores::Id, OffsetsStorageTag &gt; &amp;offsets)</div><div class="ttdoc">Set all the cells of the mesh.</div></div>
<div class="ttc" id="anamespaceviskores_1_1cont_html_a94eb61894ec5cb45eafd588185859b0a"><div class="ttname"><a href="namespaceviskores_1_1cont.html#a94eb61894ec5cb45eafd588185859b0a">viskores::cont::ConvertNumComponentsToOffsets</a></div><div class="ttdeci">void ConvertNumComponentsToOffsets(const viskores::cont::UnknownArrayHandle &amp;numComponentsArray, viskores::cont::ArrayHandle&lt; viskores::Id &gt; &amp;offsetsArray, viskores::Id &amp;componentsArraySize, viskores::cont::DeviceAdapterId device=viskores::cont::DeviceAdapterTagAny{})</div><div class="ttdoc">ConvertNumComponentsToOffsets takes an array of Vec sizes (i.e.</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1ArrayHandle_html_abe5d93aa07c249d3a5a375a8c8229eff"><div class="ttname"><a href="classviskores_1_1cont_1_1ArrayHandle.html#abe5d93aa07c249d3a5a375a8c8229eff">viskores::cont::ArrayHandle::WritePortal</a></div><div class="ttdeci">WritePortalType WritePortal() const</div><div class="ttdoc">Get an array portal that can be used in the control environment.</div><div class="ttdef"><b>Definition:</b> ArrayHandle.h:468</div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1streamline_1_1MakeStreamLines_html_af15ad4d8a918bb28a90b5d16566438c7"><div class="ttname"><a href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#af15ad4d8a918bb28a90b5d16566438c7">viskores::worklet::streamline::MakeStreamLines::MakeStreamLines</a></div><div class="ttdeci">MakeStreamLines()</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:172</div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1streamline_1_1MakeStreamLines_html_a3736167c2143bb2fb3b5c9c4623966b1"><div class="ttname"><a href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a3736167c2143bb2fb3b5c9c4623966b1">viskores::worklet::streamline::MakeStreamLines::ControlSignature</a></div><div class="ttdeci">void(WholeArrayIn field, FieldIn seedId, FieldIn position, WholeArrayOut numIndices, WholeArrayOut validPoint, WholeArrayOut streamLines) ControlSignature</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:158</div></div>
<div class="ttc" id="anamespaceviskores_html_afea83468f8cfcf7f649b1fd42d117a0d"><div class="ttname"><a href="namespaceviskores.html#afea83468f8cfcf7f649b1fd42d117a0d">viskores::UInt8</a></div><div class="ttdeci">uint8_t UInt8</div><div class="ttdoc">Base type to use for 8-bit unsigned integer numbers.</div><div class="ttdef"><b>Definition:</b> Types.h:177</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1CellSetStructured_html"><div class="ttname"><a href="classviskores_1_1cont_1_1CellSetStructured.html">viskores::cont::CellSetStructured</a></div><div class="ttdoc">Defines a 1-, 2-, or 3-dimensional structured grid of points.</div><div class="ttdef"><b>Definition:</b> CastAndCall.h:40</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1DataSet_html_a37db7e4d32eb8bad6d5343d059285ead"><div class="ttname"><a href="classviskores_1_1cont_1_1DataSet.html#a37db7e4d32eb8bad6d5343d059285ead">viskores::cont::DataSet::GetCellSet</a></div><div class="ttdeci">const viskores::cont::UnknownCellSet &amp; GetCellSet() const</div><div class="ttdef"><b>Definition:</b> DataSet.h:422</div></div>
<div class="ttc" id="aConvertNumComponentsToOffsets_8h_html"><div class="ttname"><a href="ConvertNumComponentsToOffsets_8h.html">ConvertNumComponentsToOffsets.h</a></div></div>
<div class="ttc" id="aArrayHandleCounting_8h_html"><div class="ttname"><a href="ArrayHandleCounting_8h.html">ArrayHandleCounting.h</a></div></div>
<div class="ttc" id="anamespaceviskores_1_1worklet_1_1streamline_html_a166bd757412422cf2a2c1dd3e1c624f1"><div class="ttname"><a href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1">viskores::worklet::streamline::StreamLineMode</a></div><div class="ttdeci">StreamLineMode</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:45</div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1streamline_1_1MakeStreamLines_html_aa16c1107d430ce0a46c0c34d3e2278bd"><div class="ttname"><a href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#aa16c1107d430ce0a46c0c34d3e2278bd">viskores::worklet::streamline::MakeStreamLines::streammode</a></div><div class="ttdeci">const viskores::Id streammode</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:169</div></div>
<div class="ttc" id="aCellSetStructured_8h_html"><div class="ttname"><a href="CellSetStructured_8h.html">CellSetStructured.h</a></div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1streamline_1_1MakeStreamLines_html_a388e951051bc41122127cce982b6f369"><div class="ttname"><a href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a388e951051bc41122127cce982b6f369">viskores::worklet::streamline::MakeStreamLines::planesize</a></div><div class="ttdeci">const viskores::Id planesize</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:167</div></div>
<div class="ttc" id="anamespaceviskores_1_1worklet_1_1streamline_html_a166bd757412422cf2a2c1dd3e1c624f1a3fffaf998774cdf5464960825e89b8a9"><div class="ttname"><a href="namespaceviskores_1_1worklet_1_1streamline.html#a166bd757412422cf2a2c1dd3e1c624f1a3fffaf998774cdf5464960825e89b8a9">viskores::worklet::streamline::BOTH</a></div><div class="ttdeci">@ BOTH</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:49</div></div>
<div class="ttc" id="astructviskores_1_1cont_1_1Invoker_html"><div class="ttname"><a href="structviskores_1_1cont_1_1Invoker.html">viskores::cont::Invoker</a></div><div class="ttdoc">Allows launching any worklet without a dispatcher.</div><div class="ttdef"><b>Definition:</b> Invoker.h:49</div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1streamline_1_1MakeStreamLines_html_ac69544162953a5750f7debee83919ec2"><div class="ttname"><a href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac69544162953a5750f7debee83919ec2">viskores::worklet::streamline::MakeStreamLines::maxsteps</a></div><div class="ttdeci">const viskores::Id maxsteps</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:165</div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1WorkletMapField_html"><div class="ttname"><a href="classviskores_1_1worklet_1_1WorkletMapField.html">viskores::worklet::WorkletMapField</a></div><div class="ttdoc">Base class for worklets that do a simple mapping of field arrays.</div><div class="ttdef"><b>Definition:</b> WorkletMapField.h:47</div></div>
<div class="ttc" id="astructviskores_1_1worklet_1_1ScatterUniform_html"><div class="ttname"><a href="structviskores_1_1worklet_1_1ScatterUniform.html">viskores::worklet::ScatterUniform</a></div><div class="ttdoc">A scatter that maps input to some constant numbers of output.</div><div class="ttdef"><b>Definition:</b> ScatterUniform.h:61</div></div>
<div class="ttc" id="aclassviskores_1_1Vec_html"><div class="ttname"><a href="classviskores_1_1Vec.html">viskores::Vec</a></div><div class="ttdoc">A short fixed-length array.</div><div class="ttdef"><b>Definition:</b> Types.h:365</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1UnknownCellSet_html_a7612352031b7f3a4faf68ebdc65059a2"><div class="ttname"><a href="classviskores_1_1cont_1_1UnknownCellSet.html#a7612352031b7f3a4faf68ebdc65059a2">viskores::cont::UnknownCellSet::AsCellSet</a></div><div class="ttdeci">void AsCellSet(CellSetType &amp;cellSet) const</div><div class="ttdoc">Get the cell set as a known type.</div><div class="ttdef"><b>Definition:</b> UnknownCellSet.h:189</div></div>
<div class="ttc" id="aExportMacros_8h_html_a1859aa5ce5b61da65a9c9898211f2a58"><div class="ttname"><a href="ExportMacros_8h.html#a1859aa5ce5b61da65a9c9898211f2a58">VISKORES_EXEC</a></div><div class="ttdeci">#define VISKORES_EXEC</div><div class="ttdef"><b>Definition:</b> ExportMacros.h:59</div></div>
<div class="ttc" id="aDataSet_8h_html"><div class="ttname"><a href="DataSet_8h.html">DataSet.h</a></div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1ArrayHandleIndex_html"><div class="ttname"><a href="classviskores_1_1cont_1_1ArrayHandleIndex.html">viskores::cont::ArrayHandleIndex</a></div><div class="ttdoc">An implicit array handle containing the its own indices.</div><div class="ttdef"><b>Definition:</b> ArrayHandleIndex.h:64</div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1streamline_1_1MakeStreamLines_html_a6119e3d6ccbbb84dccf41a88f6a2cc34"><div class="ttname"><a href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#a6119e3d6ccbbb84dccf41a88f6a2cc34">viskores::worklet::streamline::MakeStreamLines::rowsize</a></div><div class="ttdeci">const viskores::Id rowsize</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:168</div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1streamline_1_1MakeStreamLines_html_ac66b2f083f9e29c376dfadb69fecf7c6"><div class="ttname"><a href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#ac66b2f083f9e29c376dfadb69fecf7c6">viskores::worklet::streamline::MakeStreamLines::timestep</a></div><div class="ttdeci">const FieldType timestep</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:166</div></div>
<div class="ttc" id="aclassviskores_1_1worklet_1_1streamline_1_1MakeStreamLines_html_aacf7711f6461214fe22ac161dd5c1172"><div class="ttname"><a href="classviskores_1_1worklet_1_1streamline_1_1MakeStreamLines.html#aacf7711f6461214fe22ac161dd5c1172">viskores::worklet::streamline::MakeStreamLines::ExecutionSignature</a></div><div class="ttdeci">void(_1, _2, _3, _4, _5, _6, VisitIndex) ExecutionSignature</div><div class="ttdef"><b>Definition:</b> StreamLineUniformGrid.h:159</div></div>
<div class="ttc" id="aclassviskores_1_1cont_1_1DataSet_html_a88c9e49db93d710a27201000f67f61a9"><div class="ttname"><a href="classviskores_1_1cont_1_1DataSet.html#a88c9e49db93d710a27201000f67f61a9">viskores::cont::DataSet::SetCellSet</a></div><div class="ttdeci">void SetCellSet(const CellSetType &amp;cellSet)</div><div class="ttdef"><b>Definition:</b> DataSet.h:415</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
